<div class="change-password-container">
  <div class="card">
    <h2><mat-icon>lock</mat-icon> Alterar Senha</h2>
    <form [formGroup]="form" (ngSubmit)="submit()">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Senha atual</mat-label>
        <input matInput [type]="hideCurrent ? 'password' : 'text'" formControlName="currentPassword">
        <button mat-icon-button matSuffix type="button" (click)="hideCurrent = !hideCurrent"><mat-icon>{{ hideCurrent ? 'visibility_off' : 'visibility' }}</mat-icon></button>
        <mat-error *ngIf="form.get('currentPassword')?.invalid">Informe a senha atual</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Nova senha</mat-label>
        <input matInput [type]="hideNew ? 'password' : 'text'" formControlName="newPassword">
        <button mat-icon-button matSuffix type="button" (click)="hideNew = !hideNew"><mat-icon>{{ hideNew ? 'visibility_off' : 'visibility' }}</mat-icon></button>
        <mat-error *ngIf="form.get('newPassword')?.invalid">MÃ­nimo 6 caracteres</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Confirmar nova senha</mat-label>
        <input matInput [type]="hideConfirm ? 'password' : 'text'" formControlName="confirmPassword">
        <button mat-icon-button matSuffix type="button" (click)="hideConfirm = !hideConfirm"><mat-icon>{{ hideConfirm ? 'visibility_off' : 'visibility' }}</mat-icon></button>
        <mat-error *ngIf="form.get('confirmPassword')?.invalid">Confirme a nova senha</mat-error>
      </mat-form-field>

      <div class="success" *ngIf="successMessage"><mat-icon>check_circle</mat-icon> {{ successMessage }}</div>
      <div class="error" *ngIf="errorMessage"><mat-icon>error</mat-icon> {{ errorMessage }}</div>

      <div class="actions">
        <button mat-button routerLink="/profile">Voltar</button>
        <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid || isSaving">
          <span *ngIf="!isSaving">Salvar</span>
          <mat-spinner diameter="20" *ngIf="isSaving"></mat-spinner>
        </button>
      </div>
    </form>
  </div>
</div>